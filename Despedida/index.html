<?php
// Lista de despesas com chaves PIX
$despesas = [
    'João' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => '00987068024'],
    'Leo' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Sopelsa' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => '02745921002'],
    'Felipe' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Vini' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Cristiano' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Thiago' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Dudu' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 29.25, 'mercado_jhonny' => 35.00, 'pix' => ''],
    'Jhonny' => ['escape' => 76.66, 'fuga' => 48.90, 'van' => 111.11, 'cerveja_vini' => 0.00, 'mercado_jhonny' => 35.00, 'pix' => '00778207030']
];

// Função para formatar o valor como moeda
function formatCurrency($value) {
    return 'R$ ' . number_format($value, 2, ',', '.');
}

// Verifica se algum pagamento foi marcado como pago
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $nome = $_POST['nome'];
    $categoria = $_POST['categoria'];
    $despesas[$nome][$categoria] = 0;  // Simula o pagamento ao zerar o valor
}

?>

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESPEDIDA DE SOLTEIRO DO TXINOR</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        img {
            display: block;
            margin: 20px auto;
            width: 50%;
            height: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        .nao-pago {
            background-color: #f8d7da;
            color: #721c24;
        }

        .pago {
            background-color: #d4edda;
            color: #155724;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>DESPEDIDA DE SOLTEIRO DO TXINOR</h1>
    <img src="Images/destaque 1.jpg" alt="Destaque da Despedida">

    <table>
        <thead>
            <tr>
                <th>Nome (PIX)</th>
                <th>Ingressos Escape (Pagar a Felipe)</th>
                <th>Ingressos Fuga (Pagar a João/Sopelsa)</th>
                <th>Van (Pagar a Jhonny)</th>
                <th>Cerveja (Pagar a Vini)</th>
                <th>Mercado Extra Jhonny (Pagar a Jhonny)</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($despesas as $nome => $gastos): ?>
                <tr>
                    <td><?= $nome ?> (PIX: <?= $gastos['pix'] ?: 'N/A' ?>)</td>
                    <?php foreach (['escape', 'fuga', 'van', 'cerveja_vini', 'mercado_jhonny'] as $categoria): ?>
                        <td class="<?= $gastos[$categoria] == 0 ? 'pago' : 'nao-pago' ?>">
                            <?= formatCurrency($gastos[$categoria]) ?>
                            <?php if ($gastos[$categoria] > 0): ?>
                                <form method="POST" style="display:inline;">
                                    <input type="hidden" name="nome" value="<?= $nome ?>">
                                    <input type="hidden" name="categoria" value="<?= $categoria ?>">
                                    <button type="submit">Marcar como pago</button>
                                </form>
                            <?php endif; ?>
                        </td>
                    <?php endforeach; ?>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</body>
</html>
